# Must Pass in Proxy IP as environment variable

# Our Maintenance Failover Website
http://0.0.0.0:5000 {
  gzip
  root /home/torch2424/maintenanceFailover

  rewrite / {
  	regexp .*
  	to /
  }
}

# Home Page / Portfolio site
aaronthedev.com {
    gzip
    proxy / {$APP_IP}:8000 0.0.0.0:5000 {
        policy first
        transparent
        health_check /
    }
}

# Droppy File Server
files.aaronthedev.com {
    proxy / {$APP_IP}:8989 0.0.0.0:5000 {
        policy first
        transparent
        health_check /
        websocket
    }

    header /$/ {
        Cache-Control  "public, max-age=2678400"
    }
}

# Leah's Portfolio Site
leahrosegarza.com {
    gzip
    proxy / {$APP_IP}:2525 0.0.0.0:5000 {
        policy first
        transparent
        health_check /
    }
}

# Sayonara Docs Pags
sayonarajs.com {
    gzip
    proxy / {$APP_IP}:4200 0.0.0.0:5000 {
        policy first
        transparent
        health_check /
    }
}

# No Comply Games Maintenance
nocomplygames.com {
    gzip
    proxy / {$APP_IP}:2424 0.0.0.0:5000 {
        policy first
        transparent
        health_check /
    }
}

# Get Dis Money
getdismoney.com {
    gzip
    proxy / {$APP_IP}:3030 0.0.0.0:5000 {
        policy first
        transparent
        health_check /
    }
}

# Gogs, Aaronthedev git
git.aaronthedev.com {
    proxy / {$APP_IP}:3000 0.0.0.0:5000 {
        policy first
        transparent
        health_check /
    }
}

# Mongo Manager, Similar to phpmy admin
mongo.aaronthedev.com {
    proxy / {$APP_IP}:7000 0.0.0.0:5000 {
        policy first
        transparent
        health_check /
    }
}

# Crontab ui
# https://github.com/alseambusher/crontab-ui
cron.aaronthedev.com {
    proxy / {$APP_IP}:9000 0.0.0.0:5000 {
        policy first
        transparent
        health_check /
    }
}

# Testbuild, Droppy directory for hosting quick builds
testbuild.aaronthedev.com {
    proxy / {$APP_IP}:2425 0.0.0.0:5000 {
        policy first
        transparent
        health_check /
    }
}
